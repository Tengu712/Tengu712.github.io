<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>東方整数作品クリア機体シート</title>
    <style>
        body {
            background-color: black;
            color: white;
        }
        a, a:visited {
            color: red;
        }
        table {
            margin-bottom: 24px;
        }
        table, th, td {
            border: 1px white solid;
        }
        td.nmnbnr {
            background-color: red;
        }
        td.nmnb {
            background-color: brown;
        }
        td.nm {
            background-color: yellow;
            color: black;
        }
        td.nbnr {
            background-color: blue;
        }
        td.nb {
            background-color: green;
        }
        td.c {
            background-color: #333333;
        }
        td > a, td > a:visited {
            color: inherit;
            text-decoration: none;
        }
        table.ftable {
            border-collapse: collapse;
            margin: 0;
            padding: 0;
            width: 800px;
            height: 350px;
        }
        table.th6 {
            width: 100%;
            height: 100%;
            font-size: 1.0em;
        }
        table.th7 {
            width: 100%;
            height: 100%;
            font-size: 0.7em;
        }
        table.th8 {
            width: 100%;
            height: 100%;
            font-size: 0.7em;
        }
        table.th9 {
            width: 100%;
            height: 100%;
            font-size: 0.7em;
        }
        table.th10 {
            width: 100%;
            height: 100%;
            font-size: 1.0em;
        }
        table.th11 {
            width: 100%;
            height: 100%;
            font-size: 1.0em;
        }
        table.th12 {
            width: 100%;
            height: 100%;
            font-size: 1.0em;
        }
        p#typeoption {
            text-align: right;
        }
        div#popup {
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 16px;
            position: absolute;
            min-width: 400px;
            min-height: 250px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            -webkit-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
        }
        div#popup > p.link {
            text-align: center;
        }
    </style>
</head>

<body>

    <script>
        let div = null;
        function open_popup(title, diff, chara, status, date, link) {
            if (div !== null) {
                document.body.removeChild(div);
            }
            div = document.createElement("div");
            div.id = "popup";
            const p_title = document.createElement("p");
            p_title.innerText = "作品　：" + title;
            const p_diff = document.createElement("p");
            p_diff.innerText = "難易度：" + diff;
            const p_chara = document.createElement("p");
            p_chara.innerText = "機体　：" + chara;
            const p_status = document.createElement("p");
            p_status.innerText = "実績　：" + status;
            const p_date = document.createElement("p");
            p_date.innerText = "達成日：" + date;
            const p_link = document.createElement("p");
            p_link.classList.add("link");
            const a_link = document.createElement("a");
            a_link.href = "https://skdassoc.com/data/threplay/" + link;
            a_link.innerText = "リプレイをダウンロード";
            p_link.appendChild(a_link);
            div.appendChild(p_title);
            div.appendChild(p_diff);
            div.appendChild(p_chara);
            div.appendChild(p_status);
            div.appendChild(p_date);
            div.appendChild(p_link);
            document.body.appendChild(div);
            div.onclick = (e) => {
                e.stopPropagation();
            }
        }
        document.body.onclick = () => {
            if (div !== null) {
                document.body.removeChild(div);
                div = null;
            }
        };
    </script>

    <center>

    <p>SKD(天狗)の東方整数作品のクリア機体表兼リプレイ置き場です。</p>
    <p>NBについて、3M以内であれば特筆してあります。</p>
    <p id="typeoption">表示方式：
        <a href="https://skdassoc.com/pages/thcleartable.php">一覧</a>　
        <a href="https://skdassoc.com/pages/thcleartable.php?type=table">表</a>　
        <a href="https://skdassoc.com/pages/thcleartable.php?type=ftable">簡易表</a>
    </p>
    <hr>

<?php

$statusclasses = array(
  'th6' => array(
    'NMNB' => 'nmnbnr',
    'NM' => 'nm',
    'NB' => 'nbnr'
  ),
  'th7' => array(
    'NMNBNR' => 'nmnbnr',
    'NMNB' => 'nmnb',
    'NM' => 'nm',
    'NBNR' => 'nbnr',
    'NB' => 'nb'
  ),
  'th8' => array(
    'NMNB' => 'nmnbnr',
    'NM' => 'nm',
    'NB' => 'nbnr'
  ),
  'th9' => array(
    'NMNB' => 'nmnbnr',
    'NM' => 'nm',
    'NB' => 'nbnr',
  ),
  'th10' => array(
    'NMNB' => 'nmnbnr',
    'NM' => 'nm',
    'NB' => 'nbnr'
  ),
  'th11' => array(
    'NMNB' => 'nmnbnr',
    'NM' => 'nm',
    'NB' => 'nbnr'
  ),
  'th12' => array(
    'NMNBNV' => 'nmnbnr',
    'NMNB' => 'nmnb',
    'NM' => 'nm',
    'NBNV' => 'nbnr',
    'NB' => 'nb'
  ),
);

$titles = array(
  'th6' => '東方紅魔郷',
  'th7' => '東方妖々夢',
  'th8' => '東方永夜抄',
  'th9' => '東方花映塚',
  'th10' => '東方風神録',
  'th11' => '東方地霊殿',
  'th12' => '東方星蓮船',
  'th13' => '東方神霊廟',
  'th14' => '東方輝針城',
  'th15' => '東方紺珠伝',
  'th16' => '東方天空璋',
  'th17' => '東方鬼形獣',
  'th18' => '東方虹龍洞',
);

$charas = array(
  'ReimuA' => '霊夢A',
  'ReimuB' => '霊夢B',
  'MarisaA' => '魔理沙A',
  'MarisaB' => '魔理沙B',
  'SakuyaA' => '咲夜A',
  'SakuyaB' => '咲夜A',
  'Kekkai' => '結界組',
  'Eishou' => '詠唱組',
  'Kouma' => '紅魔組',
  'Yumei' => '幽冥組',
  'Reimu' => '霊夢',
  'Yukari' => '紫',
  'Marisa' => '魔理沙',
  'Alice' => 'アリス',
  'Sakuya' => '咲夜',
  'Remilia' => 'レミリア',
  'Youmu' => '妖夢',
  'Yuyuko' => '幽々子',
  'ReimuC' => '霊夢C',
  'MarisaC' => '魔理沙C',
  'SanaeA' => '早苗A',
  'SanaeB' => '早苗B',
);

$map = array(
  'th6' => array(
    'Easy' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
    ),
    'Normal' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
    ),
    'Hard' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
    ),
    'Lunatic' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
    ),
    'Extra' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
    ),
  ),
  'th7' => array(
    'Easy' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SakuyaA' => array('', '', NULL),
      'SakuyaB' => array('', '', NULL),
    ),
    'Normal' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SakuyaA' => array('', '', NULL),
      'SakuyaB' => array('', '', NULL),
    ),
    'Hard' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SakuyaA' => array('', '', NULL),
      'SakuyaB' => array('', '', NULL),
    ),
    'Lunatic' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SakuyaA' => array('', '', NULL),
      'SakuyaB' => array('', '', NULL),
    ),
    'Extra' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SakuyaA' => array('', '', NULL),
      'SakuyaB' => array('', '', NULL),
    ),
    'Phantasm' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SakuyaA' => array('', '', NULL),
      'SakuyaB' => array('', '', NULL),
    ),
  ),
  'th8' => array(
    'Easy' => array(
      'Kekkai' => array('', '', NULL),
      'Eishou' => array('', '', NULL),
      'Kouma' => array('', '', NULL),
      'Yumei' => array('', '', NULL),
      'Reimu' => array('', '', NULL),
      'Yukari' => array('', '', NULL),
      'Marisa' => array('', '', NULL),
      'Alice' => array('', '', NULL),
      'Sakuya' => array('', '', NULL),
      'Remilia' => array('', '', NULL),
      'Youmu' => array('', '', NULL),
      'Yuyuko' => array('', '', NULL),
    ),
    'Normal' => array(
      'Kekkai' => array('', '', NULL),
      'Eishou' => array('', '', NULL),
      'Kouma' => array('', '', NULL),
      'Yumei' => array('', '', NULL),
      'Reimu' => array('', '', NULL),
      'Yukari' => array('', '', NULL),
      'Marisa' => array('', '', NULL),
      'Alice' => array('', '', NULL),
      'Sakuya' => array('', '', NULL),
      'Remilia' => array('', '', NULL),
      'Youmu' => array('', '', NULL),
      'Yuyuko' => array('', '', NULL),
    ),
    'Hard' => array(
      'Kekkai' => array('', '', NULL),
      'Eishou' => array('', '', NULL),
      'Kouma' => array('', '', NULL),
      'Yumei' => array('', '', NULL),
      'Reimu' => array('', '', NULL),
      'Yukari' => array('', '', NULL),
      'Marisa' => array('', '', NULL),
      'Alice' => array('', '', NULL),
      'Sakuya' => array('', '', NULL),
      'Remilia' => array('', '', NULL),
      'Youmu' => array('', '', NULL),
      'Yuyuko' => array('', '', NULL),
    ),
    'Lunatic' => array(
      'Kekkai' => array('', '', NULL),
      'Eishou' => array('', '', NULL),
      'Kouma' => array('', '', NULL),
      'Yumei' => array('', '', NULL),
      'Reimu' => array('', '', NULL),
      'Yukari' => array('', '', NULL),
      'Marisa' => array('', '', NULL),
      'Alice' => array('', '', NULL),
      'Sakuya' => array('', '', NULL),
      'Remilia' => array('', '', NULL),
      'Youmu' => array('', '', NULL),
      'Yuyuko' => array('', '', NULL),
    ),
    'Extra' => array(
      'Kekkai' => array('', '', NULL),
      'Eishou' => array('', '', NULL),
      'Kouma' => array('', '', NULL),
      'Yumei' => array('', '', NULL),
      'Reimu' => array('', '', NULL),
      'Yukari' => array('', '', NULL),
      'Marisa' => array('', '', NULL),
      'Alice' => array('', '', NULL),
      'Sakuya' => array('', '', NULL),
      'Remilia' => array('', '', NULL),
      'Youmu' => array('', '', NULL),
      'Yuyuko' => array('', '', NULL),
    ),
  ),
  'th9' => array(
    'Easy' => array(
      'Reimu' => array('', '', NULL),
    ),
  ),
  'th10' => array(
    'Easy' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Normal' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Hard' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Lunatic' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Extra' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
  ),
  'th11' => array(
    'Easy' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Normal' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Hard' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Lunatic' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
    'Extra' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'ReimuC' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'MarisaC' => array('', '', NULL),
    ),
  ),
  'th12' => array(
    'Easy' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SanaeA' => array('', '', NULL),
      'SanaeB' => array('', '', NULL),
    ),
    'Normal' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SanaeA' => array('', '', NULL),
      'SanaeB' => array('', '', NULL),
    ),
    'Hard' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SanaeA' => array('', '', NULL),
      'SanaeB' => array('', '', NULL),
    ),
    'Lunatic' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SanaeA' => array('', '', NULL),
      'SanaeB' => array('', '', NULL),
    ),
    'Extra' => array(
      'ReimuA' => array('', '', NULL),
      'ReimuB' => array('', '', NULL),
      'MarisaA' => array('', '', NULL),
      'MarisaB' => array('', '', NULL),
      'SanaeA' => array('', '', NULL),
      'SanaeB' => array('', '', NULL),
    ),
  ),
);

function insert_slash($date) {
    $res = substr($date, 0, 4);
    $res .= '/';
    $res .= substr($date, 4, 2);
    $res .= '/';
    $res .= substr($date, 6);
    return $res;
}

function echo_td_with_color($title, $status) {
    global $statusclasses;
    if ($status === '') {
        echo '<td>';
        return;
    }
    echo '<td ';
    foreach ($statusclasses[$title] as $k_substr => $v_class) {
        if (strpos($status, $k_substr) !== false) {
            echo 'class="';
            echo $v_class;
            echo '">';
            return;
        }
    }
    echo 'class="c">';
}

$lines = array();
exec("ls -1 /home/tengu712/pub/data/threplay", $lines);

$replay_count = count($lines);
$registered_count = 0;

foreach ($lines as $line) {
    $datum = explode("_", $line);
    $arr = $map[$datum[0]];
    if (!is_null($map[$datum[0]])) {
        $map[$datum[0]][$datum[1]][$datum[2]][0] = $datum[3];
        $map[$datum[0]][$datum[1]][$datum[2]][1] = insert_slash(substr($datum[4], 0, 8));
        $map[$datum[0]][$datum[1]][$datum[2]][2] = $line;
        $registered_count += 1;
    }
}

if ($replay_count !== $registered_count) {
    echo '<script> alert("リプレイの数と登録された情報の数が合いません。"); </script>';
}

$shown_count = 0;

// ================================================================================================== //
//     table                                                                                          //
// ================================================================================================== //

if ($_GET['type'] === 'table') {
    echo '<p>表表示</p>';
    foreach ($map as $key_title => $map_diffs) {
        echo '<table>';
        echo '<tr>';
        echo '<td>';
        echo $titles[$key_title];
        echo '</td>';
        foreach ($map_diffs['Easy'] as $key_chara => $_) {
            echo '<td>';
            echo $charas[$key_chara];
            echo '</td>';
        }
        echo '</tr>';
        foreach ($map_diffs as $key_diff => $map_charas) {
            echo '<tr>';
            echo '<td>';
            echo $key_diff;
            echo '</td>';
            foreach ($map_charas as $key_chara => $arr) {
                if (is_null($arr[2])) {
                    echo '<td></td>';
                    continue;
                }
                echo_td_with_color($key_title, $arr[0]);
                echo '<a href="javascript:open_popup(\'';
                echo $titles[$key_title];
                echo '\', \'';
                echo $key_diff;
                echo '\', \'';
                echo $charas[$key_chara];
                echo '\', \'';
                echo $arr[0];
                echo '\', \'';
                echo $arr[1];
                echo '\', \'';
                echo $arr[2];
                echo '\');">';
                echo $arr[0];
                echo '</a>';
                echo '</td>';
                $shown_count += 1;
            }
        }
        echo '</table>';
    }
}

// ================================================================================================== //
//     ftable                                                                                         //
// ================================================================================================== //

else if ($_GET['type'] === 'ftable') {

    function echo_cell_of_ftable($title, $diff, $chara, $chara_) {
        global $map;
        global $titles;
        global $charas;
        global $shown_count;
        if (is_null($map[$title][$diff][$chara][2])) {
            echo '<td>';
            echo $chara_;
            echo '</td>';
            return;
        }
        echo_td_with_color($title, $map[$title][$diff][$chara][0]);
        echo '<a href="javascript:open_popup(\'';
        echo $titles[$title];
        echo '\', \'';
        echo $diff;
        echo '\', \'';
        echo $charas[$chara];
        echo '\', \'';
        echo $map[$title][$diff][$chara][0];
        echo '\', \'';
        echo $map[$title][$diff][$chara][1];
        echo '\', \'';
        echo $map[$title][$diff][$chara][2];
        echo '\');">';
        echo $chara_;
        echo '</a>';
        $shown_count += 1;
    }

    echo '<p>簡易表表示</p>';
    echo '<table class="ftable">';
        echo '<tr>';
            echo '<td>紅魔郷</td>';
            echo '<td>妖々夢</td>';
            echo '<td>永夜抄</td>';
            echo '<td>花映塚</td>';
            echo '<td>風神録</td>';
            echo '<td>地霊殿</td>';
            echo '<td>星蓮船</td>';
        echo '</tr>';
        echo '<tr>';
// TH6
            echo '<td>';
                echo '<table class="ftable th6">';
                    echo '<tr>';
                        echo '<td rowspan="2">E</td>';
                        echo_cell_of_ftable('th6', 'Easy', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th6', 'Easy', 'ReimuB', '霊B');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th6', 'Easy', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th6', 'Easy', 'MarisaB', '魔B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">N</td>';
                        echo_cell_of_ftable('th6', 'Normal', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th6', 'Normal', 'ReimuB', '霊B');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th6', 'Normal', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th6', 'Normal', 'MarisaB', '魔B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">H</td>';
                        echo_cell_of_ftable('th6', 'Hard', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th6', 'Hard', 'ReimuB', '霊B');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th6', 'Hard', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th6', 'Hard', 'MarisaB', '魔B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">L</td>';
                        echo_cell_of_ftable('th6', 'Lunatic', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th6', 'Lunatic', 'ReimuB', '霊B');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th6', 'Lunatic', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th6', 'Lunatic', 'MarisaB', '魔B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">X</td>';
                        echo_cell_of_ftable('th6', 'Extra', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th6', 'Extra', 'ReimuB', '霊B');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th6', 'Extra', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th6', 'Extra', 'MarisaB', '魔B');
                    echo '</tr>';
                echo '</table>';
// TH7
            echo '<td>';
                echo '<table class="ftable th7">';
                    echo '<tr>';
                        echo '<td rowspan="2">E</td>';
                        echo_cell_of_ftable('th7', 'Easy', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th7', 'Easy', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th7', 'Easy', 'SakuyaA', '咲A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th7', 'Easy', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th7', 'Easy', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th7', 'Easy', 'SakuyaB', '咲B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">N</td>';
                        echo_cell_of_ftable('th7', 'Normal', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th7', 'Normal', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th7', 'Normal', 'SakuyaA', '咲A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th7', 'Normal', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th7', 'Normal', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th7', 'Normal', 'SakuyaB', '咲B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">H</td>';
                        echo_cell_of_ftable('th7', 'Hard', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th7', 'Hard', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th7', 'Hard', 'SakuyaA', '咲A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th7', 'Hard', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th7', 'Hard', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th7', 'Hard', 'SakuyaB', '咲B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">L</td>';
                        echo_cell_of_ftable('th7', 'Lunatic', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th7', 'Lunatic', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th7', 'Lunatic', 'SakuyaA', '咲A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th7', 'Lunatic', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th7', 'Lunatic', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th7', 'Lunatic', 'SakuyaB', '咲B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">X</td>';
                        echo_cell_of_ftable('th7', 'Extra', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th7', 'Extra', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th7', 'Extra', 'SakuyaA', '咲A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th7', 'Extra', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th7', 'Extra', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th7', 'Extra', 'SakuyaB', '咲B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">P</td>';
                        echo_cell_of_ftable('th7', 'Phantasm', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th7', 'Phantasm', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th7', 'Phantasm', 'SakuyaA', '咲A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th7', 'Phantasm', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th7', 'Phantasm', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th7', 'Phantasm', 'SakuyaB', '咲B');
                    echo '</tr>';
                echo '</table>';
// TH8
            echo '<td>';
                echo '<table class="ftable th8">';
                    echo '<tr>';
                        echo '<td rowspan="3">E</td>';
                        echo_cell_of_ftable('th8', 'Easy', 'Kekkai', '結');
                        echo_cell_of_ftable('th8', 'Easy', 'Eishou', '詠');
                        echo_cell_of_ftable('th8', 'Easy', 'Kouma', '紅');
                        echo_cell_of_ftable('th8', 'Easy', 'Yumei', '冥');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Easy', 'Reimu', '霊');
                        echo_cell_of_ftable('th8', 'Easy', 'Marisa', '魔');
                        echo_cell_of_ftable('th8', 'Easy', 'Sakuya', '咲');
                        echo_cell_of_ftable('th8', 'Easy', 'Youmu', '妖');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Easy', 'Yukari', '紫');
                        echo_cell_of_ftable('th8', 'Easy', 'Alice', 'ア');
                        echo_cell_of_ftable('th8', 'Easy', 'Remilia', 'レ');
                        echo_cell_of_ftable('th8', 'Easy', 'Yuyuko', '幽');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="3">N</td>';
                        echo_cell_of_ftable('th8', 'Normal', 'Kekkai', '結');
                        echo_cell_of_ftable('th8', 'Normal', 'Eishou', '詠');
                        echo_cell_of_ftable('th8', 'Normal', 'Kouma', '紅');
                        echo_cell_of_ftable('th8', 'Normal', 'Yumei', '冥');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Normal', 'Reimu', '霊');
                        echo_cell_of_ftable('th8', 'Normal', 'Marisa', '魔');
                        echo_cell_of_ftable('th8', 'Normal', 'Sakuya', '咲');
                        echo_cell_of_ftable('th8', 'Normal', 'Youmu', '妖');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Normal', 'Yukari', '紫');
                        echo_cell_of_ftable('th8', 'Normal', 'Alice', 'ア');
                        echo_cell_of_ftable('th8', 'Normal', 'Remilia', 'レ');
                        echo_cell_of_ftable('th8', 'Normal', 'Yuyuko', '幽');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="3">H</td>';
                        echo_cell_of_ftable('th8', 'Hard', 'Kekkai', '結');
                        echo_cell_of_ftable('th8', 'Hard', 'Eishou', '詠');
                        echo_cell_of_ftable('th8', 'Hard', 'Kouma', '紅');
                        echo_cell_of_ftable('th8', 'Hard', 'Yumei', '冥');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Hard', 'Reimu', '霊');
                        echo_cell_of_ftable('th8', 'Hard', 'Marisa', '魔');
                        echo_cell_of_ftable('th8', 'Hard', 'Sakuya', '咲');
                        echo_cell_of_ftable('th8', 'Hard', 'Youmu', '妖');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Hard', 'Yukari', '紫');
                        echo_cell_of_ftable('th8', 'Hard', 'Alice', 'ア');
                        echo_cell_of_ftable('th8', 'Hard', 'Remilia', 'レ');
                        echo_cell_of_ftable('th8', 'Hard', 'Yuyuko', '幽');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="3">L</td>';
                        echo_cell_of_ftable('th8', 'Lunatic', 'Kekkai', '結');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Eishou', '詠');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Kouma', '紅');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Yumei', '冥');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Lunatic', 'Reimu', '霊');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Marisa', '魔');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Sakuya', '咲');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Youmu', '妖');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Lunatic', 'Yukari', '紫');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Alice', 'ア');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Remilia', 'レ');
                        echo_cell_of_ftable('th8', 'Lunatic', 'Yuyuko', '幽');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="3">X</td>';
                        echo_cell_of_ftable('th8', 'Extra', 'Kekkai', '結');
                        echo_cell_of_ftable('th8', 'Extra', 'Eishou', '詠');
                        echo_cell_of_ftable('th8', 'Extra', 'Kouma', '紅');
                        echo_cell_of_ftable('th8', 'Extra', 'Yumei', '冥');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Extra', 'Reimu', '霊');
                        echo_cell_of_ftable('th8', 'Extra', 'Marisa', '魔');
                        echo_cell_of_ftable('th8', 'Extra', 'Sakuya', '咲');
                        echo_cell_of_ftable('th8', 'Extra', 'Youmu', '妖');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th8', 'Extra', 'Yukari', '紫');
                        echo_cell_of_ftable('th8', 'Extra', 'Alice', 'ア');
                        echo_cell_of_ftable('th8', 'Extra', 'Remilia', 'レ');
                        echo_cell_of_ftable('th8', 'Extra', 'Yuyuko', '幽');
                    echo '</tr>';
                echo '</table>';
            echo '</td>';
// TH9
            echo '<td>';
                echo '<table class="ftable th9">';
                echo '</table>';
            echo '</td>';
// TH10
            echo '<td>';
                echo '<table class="ftable th10">';
                    echo '<tr>';
                        echo '<td rowspan="2">E</td>';
                        echo_cell_of_ftable('th10', 'Easy', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th10', 'Easy', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th10', 'Easy', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th10', 'Easy', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th10', 'Easy', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th10', 'Easy', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">N</td>';
                        echo_cell_of_ftable('th10', 'Normal', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th10', 'Normal', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th10', 'Normal', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th10', 'Normal', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th10', 'Normal', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th10', 'Normal', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">H</td>';
                        echo_cell_of_ftable('th10', 'Hard', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th10', 'Hard', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th10', 'Hard', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th10', 'Hard', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th10', 'Hard', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th10', 'Hard', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">L</td>';
                        echo_cell_of_ftable('th10', 'Lunatic', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th10', 'Lunatic', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th10', 'Lunatic', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th10', 'Lunatic', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th10', 'Lunatic', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th10', 'Lunatic', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">X</td>';
                        echo_cell_of_ftable('th10', 'Extra', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th10', 'Extra', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th10', 'Extra', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th10', 'Extra', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th10', 'Extra', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th10', 'Extra', 'MarisaC', '魔C');
                    echo '</tr>';
                echo '</table>';
            echo '</td>';
// TH11
            echo '<td>';
                echo '<table class="ftable th11">';
                    echo '<tr>';
                        echo '<td rowspan="2">E</td>';
                        echo_cell_of_ftable('th11', 'Easy', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th11', 'Easy', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th11', 'Easy', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th11', 'Easy', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th11', 'Easy', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th11', 'Easy', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">N</td>';
                        echo_cell_of_ftable('th11', 'Normal', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th11', 'Normal', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th11', 'Normal', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th11', 'Normal', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th11', 'Normal', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th11', 'Normal', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">H</td>';
                        echo_cell_of_ftable('th11', 'Hard', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th11', 'Hard', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th11', 'Hard', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th11', 'Hard', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th11', 'Hard', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th11', 'Hard', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">L</td>';
                        echo_cell_of_ftable('th11', 'Lunatic', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th11', 'Lunatic', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th11', 'Lunatic', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th11', 'Lunatic', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th11', 'Lunatic', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th11', 'Lunatic', 'MarisaC', '魔C');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">X</td>';
                        echo_cell_of_ftable('th11', 'Extra', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th11', 'Extra', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th11', 'Extra', 'ReimuC', '霊C');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th11', 'Extra', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th11', 'Extra', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th11', 'Extra', 'MarisaC', '魔C');
                    echo '</tr>';
                echo '</table>';
            echo '</td>';
// TH12
            echo '<td>';
                echo '<table class="ftable th12">';
                    echo '<tr>';
                        echo '<td rowspan="2">E</td>';
                        echo_cell_of_ftable('th12', 'Easy', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th12', 'Easy', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th12', 'Easy', 'SanaeA', '早A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th12', 'Easy', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th12', 'Easy', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th12', 'Easy', 'SanaeB', '早B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">N</td>';
                        echo_cell_of_ftable('th12', 'Normal', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th12', 'Normal', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th12', 'Normal', 'SanaeA', '早A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th12', 'Normal', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th12', 'Normal', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th12', 'Normal', 'SanaeB', '早B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">H</td>';
                        echo_cell_of_ftable('th12', 'Hard', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th12', 'Hard', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th12', 'Hard', 'SanaeA', '早A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th12', 'Hard', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th12', 'Hard', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th12', 'Hard', 'SanaeB', '早B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">L</td>';
                        echo_cell_of_ftable('th12', 'Lunatic', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th12', 'Lunatic', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th12', 'Lunatic', 'SanaeA', '早A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th12', 'Lunatic', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th12', 'Lunatic', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th12', 'Lunatic', 'SanaeB', '早B');
                    echo '</tr>';
                    echo '<tr>';
                        echo '<td rowspan="2">X</td>';
                        echo_cell_of_ftable('th12', 'Extra', 'ReimuA', '霊A');
                        echo_cell_of_ftable('th12', 'Extra', 'MarisaA', '魔A');
                        echo_cell_of_ftable('th12', 'Extra', 'SanaeA', '早A');
                    echo '</tr>';
                    echo '<tr>';
                        echo_cell_of_ftable('th12', 'Extra', 'ReimuB', '霊B');
                        echo_cell_of_ftable('th12', 'Extra', 'MarisaB', '魔B');
                        echo_cell_of_ftable('th12', 'Extra', 'SanaeB', '早B');
                    echo '</tr>';
                echo '</table>';
        echo '</tr>';
    echo '</table>';
}

// ================================================================================================== //
//     list                                                                                           //
// ================================================================================================== //

else {

    echo '<p>一覧表示';
    if ($_GET['tfilter'] != '') {
        echo '：';
        echo $titles[$_GET['tfilter']];
    }
    if ($_GET['dfilter'] != '') {
        echo '：';
        echo $_GET['dfilter'];
    }
    echo '</p>';
    echo '<p>作品フィルター：';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?dfilter=' . $_GET['dfilter'] . '">なし</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th6&dfilter=' . $_GET['dfilter'] . '">紅</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th7&dfilter=' . $_GET['dfilter'] . '">妖</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th8&dfilter=' . $_GET['dfilter'] . '">永</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th9&dfilter=' . $_GET['dfilter'] . '">花</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th10&dfilter=' . $_GET['dfilter'] . '">風</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th11&dfilter=' . $_GET['dfilter'] . '">地</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th12&dfilter=' . $_GET['dfilter'] . '">星</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th13&dfilter=' . $_GET['dfilter'] . '">神</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th14&dfilter=' . $_GET['dfilter'] . '">輝</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th15&dfilter=' . $_GET['dfilter'] . '">紺</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th16&dfilter=' . $_GET['dfilter'] . '">天</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th17&dfilter=' . $_GET['dfilter'] . '">鬼</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=th18&dfilter=' . $_GET['dfilter'] . '">虹</a>';
    echo '</p>';
    echo '<p>難易度フィルター：';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '">なし</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '&dfilter=Easy">Easy</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '&dfilter=Normal">Normal</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '&dfilter=Hard">Hard</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '&dfilter=Lunatic">Lunatic</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '&dfilter=Extra">Extra</a>　';
    echo '<a href="https://skdassoc.com/pages/thcleartable.php?tfilter=' . $_GET['tfilter'] . '&dfilter=Phantasm">Phantasm</a>';
    echo '</p>';
    echo "<table>";
    echo "<thead>";
    echo "<tr><th>作品</th><th>難易度</th><th>機体</th><th>実績</th><th>達成日</th></tr>";
    echo "</thead>";
    echo "<tbody>";

    foreach ($map as $key_title => $map_diffs) {
        if ($_GET['tfilter'] != '' && $_GET['tfilter'] !== $key_title) {
            continue;
        }
        echo '<tr>';
        echo '<td rowspan="';
        if ($_GET['dfilter'] == '') {
            echo count($map[$key_title]['Easy']) * count($map[$key_title]);
        } else {
            echo count($map[$key_title]['Easy']);
        }
        echo '">';
        echo $titles[$key_title];
        echo '</td>';
        $is_first_for_diff = True;
        foreach ($map_diffs as $key_diff => $map_charas) {
            if ($_GET['dfilter'] != '' && $_GET['dfilter'] !== $key_diff) {
                continue;
            }
            if (!$is_first_for_diff) {
                echo '<tr>';
            }
            echo '<td rowspan="';
            echo count($map[$key_title]['Easy']);
            echo '">';
            echo $key_diff;
            echo '</td>';
            $is_first_for_chara = True;
            foreach ($map_charas as $key_chara => $arr) {
                if (!$is_first_for_chara) {
                    echo '<tr>';
                }
                echo '<td>';
                echo $charas[$key_chara];
                echo '</td>';
                if (is_null($arr[2])) {
                    echo '<td></td><td></td>';
                } else {
                    echo_td_with_color($key_title, $arr[0]);
                    echo '<a href="https://skdassoc.com/data/threplay/';
                    echo $arr[2];
                    echo '">';
                    echo $arr[0];
                    echo '</a>';
                    echo '</td><td>';
                    echo $arr[1];
                    echo '</td>';
                    $shown_count += 1;
                }
                echo '</tr>';
                $is_first_for_chara = False;
            }
        }
    }
    echo "</tbody>";
    echo "</table>";
}

if ($shown_count !== $replay_count) {
    echo '<script> alert("リプレイの数と表示された情報の数が合いません。"); </script>';
}

?>

    <center>

</body>
</html>
